项目说明
=================================
本项目是在[WiringPi](https://github.com/WiringPi/WiringPi)的基础上修改而来。目前仅在核桃派上测试通过，树莓派上使用可能存在未知bug。

安装本项目到开发板上
========
1. 下载到开发板上
```
git clone https://github.com/sc-bin/WiringPi.git
```
2. 运行脚本，自动编译并安装到板子上
```
cd WiringPi
./build 
```

玩法一: gpio指令
========
安装完成后，在命令行可以输入以`gpio`开头的指令，实现对引脚的控制

查看型号
------
```
gpio -v
```
在命令行输入上面的命令，即可输出板子型号版本信息

查看所有引脚的状态
------
```
gpio pins
```
命令行输入上面的命令，就会输出一张大表格，其中每一列的含义如下
- `Physical` : 板上排针的编号
- `V` : 代表当前引脚的电平状态，1为高电平，0为低电平
- `Mode` : 这个引脚当前的状态，IN或OUT表示输入输出，ALT数字表示引脚处于复用功能几，OFF则是初始未设置状态
- `Name` : 引脚名称
- `wPi` : wpi编号，在本项目内各种需要选择引脚的地方使用
- `GPIO` : 芯片内部的gpio编号

设置引脚功能
------
```
gpio mode [WpiNum] [mode]
```
其中`[WpiNum]`是你要控制引脚的wpi编号，`[mode]`是在下面几种中间选择:
- `in` : 输入模式,浮空
- `up` : 输入模式,开启内部上拉
- `down` : 输入模式,开启内部下拉
- `out` : 输出模式
- `alt2`...`alt5` : 设置引脚为第n个复用功能

例如我想把wpi编号为7的引脚设置为上拉输入，则在命令行输入如下两行
```
gpio mode 7 in
gpio mode 7 up
```

读引脚电平
------
```
gpio read [WpiNum]
```
其中`[WpiNum]`是你要控制引脚的wpi编号，例如我想读取wpi编号为7的引脚，就在命令行输入如下
```
gpio read 7
```


控制引脚输出
------
```
gpio write [WpiNum] [status]
```
其中`[WpiNum]`是你要控制引脚的wpi编号，`[status]`为1或0。例如我想让Wpi引脚7输出高电平(需要先设置为输出模式)
```
gpio write 7 1
```
翻转引脚电平
------
```
gpio toggle [WpiNum]
```
让一个处于输出模式的引脚，输出的电平翻转，即7号脚本来输出1，执行完这个命令就会变成0，本来是0，执行完就会变成1。
```
gpio toggle 7
```

硬件pwm-占空比式控制
------
```
gpio pwm [wpipin] [range] [freq] 
```
- [wpipin]是带硬件pwm的引脚的wpi编号
- [range]是占空比，取值为0到1000
- [freq]是期望的频率，pwm1到3的频率范围是2到20k,pwm4的频率范围是400到20k.且2和3共用分频器,如果频率低于400,最好pwm2和3都工作在相同的频率.

比如我想输出一个频率1k,占空比千分之50的波形到硬件pwm1所在的3号引脚上,则在命令行输入如下指令
```
gpio pwm 3 50 1000
```

硬件pwm-长度值控制

```
gpio pwmt  [wpipin] [high_time] [period_time] 
```
- [wpipin]是带硬件pwm的引脚的wpi编号
- [high_time]是一个周期内高电平部分的长度，以us为单位,不能大于`[period_time]`
- [period_time]是一个周期的长度,以us为单位,最长控制到50ms即50000.pwm4只能到2.5ms即25000us.

比如我想输出一个周期20ms,高电平长1.5ms的波形来控制舵机,舵机连接在pwm1所在的3号引脚上,则在命令行输入如下指令
```
gpio pwmt 3 1500 20000
```
